[package]
name = "wasmer-vfs"
version = "3.0.0-rc.2"
description = "Wasmer Virtual FileSystem"
authors = ["Wasmer Engineering Team <engineering@wasmer.io>"]
license = "MIT"
edition = "2018"

[dependencies]
wasmer-types = { path = "../types", version = "3.0.0-rc.2", default_features = false }
wasmer-wasi-types = { path = "../wasi-types", version = "3.0.0-rc.2", default_features = false }

libc = { version = "^0.2", default-features = false, optional = true }
thiserror = "1"
tracing = { version = "0.1" }
typetag = { version = "0.1", optional = true }
serde = { version = "1.0", default-features = false, features = ["derive"], optional = true }
#webc = { version = "3.0.1", optional = true }
# Something is still wrong with the webc version published on crates.io when attempting to
# load a .webc from the registry (e.g. sharrattj/coreutils)
# 780.main.js:652 panicked at 'range end index 76 out of range for slice of length 44', /home/john/.cargo/registry/src/github.com-1ecc6299db9ec823/webc-3.0.1/src/lib.rs:925:30
webc = { path = "../../../pirita/crates/webc", optional = true }
slab = { version = "0.4" }
derivative = "2.2.0"
anyhow = { version = "1.0.66", optional = true }
async-trait = { version = "^0.1" }
lazy_static = "1.4"
fs_extra = { version = "1.2.0", optional = true }
filetime = { version = "0.2.18", optional = true }
bytes = "1"
tokio = { version = "1", features = [ "io-util", "sync", "macros" ], default_features = false }

[dev-dependencies]
tokio = { version = "1", features = [ "io-util", "rt" ], default_features = false }

[features]
default = ["std", "sys", "host-fs", "webc-fs", "static-fs"]
host-fs = ["libc", "fs_extra", "filetime", "tokio/fs", "tokio/io-std"]
webc-fs = ["webc", "anyhow"]
static-fs = ["webc", "anyhow"]
enable-serde = [
    "serde",
    "typetag"
]
no-time = []
std = [ "wasmer-types/std" ]
core = [ "wasmer-types/core" ]
sys = [ "wasmer-wasi-types/sys" ]
js = [ "wasmer-wasi-types/js" ]